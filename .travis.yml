sudo: required
services:
  - docker
language: groovy
before_install:
  - docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
  - docker run -d -p 27017:27017 mongo:latest
script:
  - docker build -t sdkman/sdkman-announce:2.0.0-SNAPSHOT .
  - docker run -d -p 9001:9001 --net=host sdkman/sdkman-announce:2.0.0-SNAPSHOT
  - "./gradlew check"
after_success:
  - docker push sdkman/sdkman-announce:2.0.0-SNAPSHOT
cache:
  directories:
  - "$HOME/.gradle"
env:
  global:
  - secure: isO3kgMEplqwnmq1gUkzfXDfCgFOjJzgIOCdJzqI2rzT7N6IDBbMGjyhFpsmo4lU+MGNB+xZFIREKwSTyRaYUwzI6b6MVBru3qh4iT45CFTP4Mn3Bqdr/SXkNl8GSa5sgrKB1Q9tzKpcH8LbrWUJzC5JZv3kHLfj44WP/8AhY/w=
  - secure: ZNPUbUxWCgu0ymYiPDnRN4UBNMs4ZflzyEhXcvOAXl3vK+bRI7GNUEWh+nbix6+TSZULMMrOa4/pxHiBWN932KDEHOTk0ZbQke61A1tX+9Eis9/bBArtFod3a+62VfclXA3eAt5NQtw3wPfQ1OXGNswY4hs51+CpSdEcUUl0itI=
  - secure: FlnmU8grwAi3bOLuLtsBPvwE/QmaIPlFsFAQUsDOLbW7uWxM5p9QTbKTfFxFj22n5LRhC7oWhdGEcEV6i15BimB+NhcLtZIpTPaCdmBTeAcuAW5Ob069p4EQ3HAOgAWDvOzYg1AfxSa7neu/rVvfFDTkAxiTwUmy01tq7vqPuqs=
